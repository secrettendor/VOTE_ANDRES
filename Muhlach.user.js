// ==UserScript==
// @name ANDRES-MAC
// @match https://vote-andres.vercel.app/*
// @grant none
// ==/UserScript==
(()=>{const w=window,d=document,sleep=ms=>new Promise(r=>setTimeout(r,ms)),rand=(a=120,b=320)=>Math.floor(Math.random()*(b-a+1))+a,wait=async(s,t=5e3,i=120)=>{const st=Date.now();while(Date.now()-st<t){const el=d.querySelectorAll(s);if(el.length)return el;await sleep(i);}return null;},reload=async()=>{try{sessionStorage.clear();d.cookie.split(";").forEach(c=>{const eq=c.indexOf("="),n=eq>-1?c.substr(0,eq):c;d.cookie=n+"=;expires=Thu,01 Jan 1970 00:00:00 GMT;path=/";});await sleep(1500);}catch{}location.reload();},MAC={person:"Andres Muhlach",banners:["https://backend.choicely.com/images/Y2hvaWNlbHktZXUvaW1hZ2VzL2E0SVo5VFAxM3V1eHFoQVdJYTlX/serve/","https://backend.choicely.com/images/Y2hvaWNlbHktZXUvaW1hZ2VzL01XSk9vZEwwbUdIc01oekMyUU85/serve/"]},origFetch=w.fetch;w.fetch=async(...a)=>{const r=await origFetch.apply(w,a);if(a[0].includes("/vote_messages"))r.clone().json().then(j=>{if(j.status==="Accepted")setTimeout(reload,1500);}).catch(()=>{});return r;};const run=async()=>{for(const url of MAC.banners){const img=(await wait(`img[src="${url}"]`))?.[0];if(img)img.click();await sleep(rand());}const h=await wait("h6");if(!h)return reload();const target=[...h].find(e=>e.textContent.trim()===MAC.person);if(!target)return reload();target.scrollIntoView({behavior:"smooth",block:"center"});await sleep(rand());const btn=await wait(".custom-vote-button-icon");btn&&btn[5]?btn[5].click():reload();};setInterval(()=>{try{w.dispatchEvent(new MouseEvent("mousemove",{bubbles:1}));w.dispatchEvent(new KeyboardEvent("keydown",{bubbles:1,key:"Shift"}));}catch{}},1e3);d.readyState==="complete"?run():w.addEventListener("load",run);})();
